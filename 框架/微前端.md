## 微前端

### 0. 问题介绍

对于大型前端项目，比如公司内部管理系统（OA、HR、CRM、会议预约等系统），如果将所有业务放在一个前端项目中，随着业务功能不断增加，就会导致

- 代码规模庞大，编译时间过长，开发打包速度越来越慢
- 项目文件越来越多，导致相关文件变得越来越困难
- 某一个业务的小改动，导致整个项目的打包盒部署

### 1. 什么是微前端

从架构来说，**微前端**采用微服务的设计理念，是实现组合多应用的技术架构。每个子应用，即可称之为**微前端**。

### 2. 优势

- 技术栈无关：主应用不限制子应用的技术选型。
- 便于划分团队指责：日常需求会按照团队进行划分，各个团队只专注于自己的业务模块，各个子应用之间状态隔离，运行时状态不共享，便于维护。
- 独立开发、独立部署：日常开发会将模块按照业务进行划分，每个模块都有自己的构建部署流程，子应用具备独立部署的能力后，单个模块的业务变更只会影响到本模块，从而降低了部署的风险、提高部署效率。
- 增量升级：当需要对系统进行技术升级或重构时，微前端的技术方式能够有效实现渐进式重构。

### 3. 常见的集成方式

1. Iframe 集成

在浏览器中使用iframe，子应用部署后得到的html，主应用只需要根据url路径map获得子应用的路径，使用 **iframe.src** 的方式引入即可。

2. Javascript 集成

每个子应用使用 ```<script>``` 标签挂在主应用的 **head** 上，每个script都会在window上挂载一个用于render自身应用的函数，主应用根据url路径map获得对应的render函数之后，执行即可获得子应用。

3. Web Components 集成

每个子应用使用 ```<script>``` 标签自定义了一个元素类型（自定义标签）,主应用根据url路径匹配对应的组件添加到主应用上实现渲染。

### 4. 样式

### 5. 共享组件库

### 6. 跨应用通信

### 7.

### 参考文档

[微前端（一）- 理念篇](https://www.lumin.tech/blog/micro-frontends-1-concept/)

[Micro Frontends](https://swearer23.github.io/micro-frontends/)

[Micro Frontends from martinfowler.com](https://martinfowler.com/articles/micro-frontends.html)

[微前端框架之single-spa从入门到精通](https://mp.weixin.qq.com/s?__biz=MzA3NTk4NjQ1OQ==&mid=2247484245&idx=1&sn=9ee91018578e6189f3b11a4d688228c5&chksm=9f696021a81ee937847c962e3135017fff9ba8fd0b61f782d7245df98582a1410aa000dc5fdc&token=165646905&lang=zh_CN#rd)